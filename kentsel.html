<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TÄ°MA Sesli Asistan</title>
    <style>
        :root { --gold: #b8860b; --black: #1a1a1a; }
        body { background: #fff; color: var(--black); font-family: sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; text-align: center; padding: 20px; }
        .ai-ring { width: 150px; height: 150px; border: 5px solid #eee; border-radius: 50%; position: relative; display: flex; align-items: center; justify-content: center; margin-bottom: 30px; }
        .active-ring { border-top-color: var(--gold); animation: spin 1s linear infinite; position: absolute; width: 100%; height: 100%; border-radius: 50%; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .btn-start { background: var(--black); color: white; border: none; padding: 20px 40px; border-radius: 50px; font-size: 1.2em; cursor: pointer; font-weight: bold; }
        #status { margin-top: 20px; font-weight: bold; color: var(--gold); min-height: 24px; }
        #customer-say { font-style: italic; color: #666; margin-top: 10px; }
        .btn-wa { display:none; background: #25d366; color: white; text-decoration: none; padding: 15px 30px; border-radius: 50px; margin-top: 20px; font-weight: bold; }
    </style>
</head>
<body>

    <div class="ai-ring">
        <div id="ring" class=""></div>
        <span style="font-size: 40px;">ğŸ™ï¸</span>
    </div>

    <h2 id="title">TÄ°MA AkÄ±llÄ± Asistan</h2>
    <p id="instruction">Asistanla konuÅŸmak iÃ§in butona basÄ±n.</p>
    
    <button class="btn-start" onclick="asistanBaslat()">ASÄ°STANI BAÅLAT</button>

    <div id="status"></div>
    <div id="customer-say"></div>

    <a id="waButton" href="https://wa.me/905320000000" class="btn-wa">MÃ¼hendise BaÄŸlan</a>
    <a href="index.html" style="margin-top: 30px; color: #888; text-decoration: none; font-size: 0.8em;">â† Geri DÃ¶n</a>

    <script>
        const statusDiv = document.getElementById('status');
        const customerSayDiv = document.getElementById('customer-say');
        const ring = document.getElementById('ring');

        // 1. ASÄ°STANIN KONUÅMASI
        function konus(metin) {
            window.speechSynthesis.cancel();
            const msg = new SpeechSynthesisUtterance(metin);
            msg.lang = 'tr-TR';
            msg.rate = 1.1;
            msg.onend = () => dinlemeyeBasla(); // KonuÅŸma bitince dinlemeye geÃ§
            window.speechSynthesis.speak(msg);
            statusDiv.innerText = "Asistan KonuÅŸuyor...";
            ring.classList.remove('active-ring');
        }

        // 2. MÃœÅTERÄ°YÄ° DÄ°NLEME
        function dinlemeyeBasla() {
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            if (!SpeechRecognition) {
                statusDiv.innerText = "TarayÄ±cÄ±nÄ±z ses tanÄ±mayÄ± desteklemiyor.";
                return;
            }

            const recognition = new SpeechRecognition();
            recognition.lang = 'tr-TR';
            recognition.start();
            
            statusDiv.innerText = "Sizi Dinliyorum...";
            ring.classList.add('active-ring');

            recognition.onresult = (event) => {
                const transcript = event.results[0][0].transcript.toLowerCase();
                customerSayDiv.innerText = "SÃ¶ylediÄŸiniz: " + transcript;
                cevapUret(transcript);
            };

            recognition.onerror = () => {
                statusDiv.innerText = "Sesinizi alamadÄ±m, tekrar deneyin.";
                ring.classList.remove('active-ring');
            };
        }

        // 3. MÃœÅTERÄ°NÄ°N CEVABINA GÃ–RE CEVAP ÃœRETME
        function cevapUret(mesaj) {
            let cevap = "";

            if (mesaj.includes("fiyat") || mesaj.includes("maliyet") || mesaj.includes("kaÃ§ para")) {
                cevap = "2025 yÄ±lÄ± inÅŸaat maliyetlerimiz metrekare bazÄ±nda yirmi beÅŸ bin TL'den baÅŸlamaktadÄ±r. DetaylÄ± hesaplama iÃ§in WhatsApp butonunu kullanabilirsiniz.";
            } else if (mesaj.includes("fatih") || mesaj.includes("mevzuat") || mesaj.includes("yasa")) {
                cevap = "Fatih bÃ¶lgesinde yÃ¼zde elli artÄ± bir Ã§oÄŸunlukla dÃ¶nÃ¼ÅŸÃ¼m yapabiliyoruz. BinanÄ±z sit alanÄ±ndaysa Ã¶zel kurul izni almaktayÄ±z.";
            } else if (mesaj.includes("yardÄ±m") || mesaj.includes("destek") || mesaj.includes("yarÄ±sÄ± bizden")) {
                cevap = "Devletimiz YarÄ±sÄ± Bizden kampanyasÄ± ile toplamda bir buÃ§uk milyon lira hibe ve kredi desteÄŸi saÄŸlamaktadÄ±r.";
            } else if (mesaj.includes("teÅŸekkÃ¼r") || mesaj.includes("saÄŸol")) {
                cevap = "Rica ederim, Tima Grup olarak size yardÄ±mcÄ± olmaktan mutluluk duyduk. BaÅŸka bir sorunuz var mÄ±?";
            } else {
                cevap = "AnladÄ±m. Bu konuda uzman mÃ¼hendisimize baÄŸlanmak ister misiniz? Yoksa fiyat veya mevzuat hakkÄ±nda mÄ± bilgi istersiniz?";
            }

            konus(cevap);
            document.getElementById('waButton').style.display = 'inline-block';
        }

        function asistanBaslat() {
            konus("Merhaba! Ben Tima Grup sanal asistanÄ±yÄ±m. Fatih kentsel dÃ¶nÃ¼ÅŸÃ¼m sÃ¼reci, inÅŸaat fiyatlarÄ± veya devlet destekleri hakkÄ±nda ne Ã¶ÄŸrenmek istersiniz? Sizi dinliyorum.");
            document.querySelector('.btn-start').innerText = "Yeniden BaÅŸlat";
        }
    </script>
</body>
</html>

